“Related RBs” shouldn’t be random-by-position. It should be rank-neighbors.

What you want (spec)

For the player currently viewed:

Determine their position rank for the selected season + scoring (ex: WR9)

Show ±3 around them in that same position:

WR6, WR7, WR8, WR10, WR11, WR12

Handle edges:

If the player is WR2, show WR1, WR3, WR4, WR5, WR6, WR7 (as many as exist)

Same logic for RB/QB/TE/K/DEF.

Data requirements

You need, for each season + format:

pos (QB/RB/WR/TE/K/DEF)

pos_rank (1..N)

player_id (your canonical id)

(optional) ppg, total_points, etc. for display

This can come from your existing “Rankings & Value” dataset or whatever you use to compute season rank.

Backend logic (recommended)

Create an endpoint like:

GET /api/players/:playerId/related?season=2025&format=ppr&radius=3

Algorithm

Fetch current player’s pos and pos_rank for that season/format.

Query same position players with ranks in [rank-radius, rank+radius].

Exclude the current player.

Sort by pos_rank.

Return up to 2*radius players (or fewer near edges).

SQL-ish example
SELECT player_id, name, team, pos, pos_rank, ppg
FROM season_ranks
WHERE season = :season
  AND format = :format
  AND pos = :pos
  AND pos_rank BETWEEN :min_rank AND :max_rank
  AND player_id <> :player_id
ORDER BY pos_rank ASC;


Where:

min_rank = max(1, pos_rank - 3)

max_rank = pos_rank + 3

Frontend logic (if you don’t want a new endpoint yet)

If you already load a full position ranking list client-side (even a top 100 list), you can compute neighbors in JS:

function getRankNeighbors(list, playerId, radius = 3) {
  // list must be sorted by pos_rank and same pos/season/format
  const idx = list.findIndex(p => p.player_id === playerId);
  if (idx === -1) return [];

  const start = Math.max(0, idx - radius);
  const end = Math.min(list.length, idx + radius + 1);

  return list
    .slice(start, end)
    .filter(p => p.player_id !== playerId);
}


But backend is better for performance and correctness.

UI tweaks (small, but makes it premium)

Rename the section dynamically:

“Rank Neighbors (WR)”

“Similar Tier (RB)”

And add a sublabel:

“Based on 2025 PPR season rank”

“Showing WR6–WR12”

Also: show the rank on each pill:

WR6, WR7, etc.

Edge cases to handle

Player missing rank (injured season / no games): fallback to “Same Team RBs” or “Same Tier by ADP” (optional)

Ties: decide whether pos_rank is unique (recommended) or allow ties and sort by points

If list is shorter than 6 neighbors, just show what exists.